/*steal-platform@0.0.4#platform*/
define("steal-platform@0.0.4#platform",["@loader"],function(o){var e=(o.global,o._nodeRequire),t="object"==typeof process&&"[object process]"==={}.toString.call(process),r="undefined"!=typeof navigator?navigator.userAgent:"",i=/iPhone OS/.test(r),n=/Android/.test(r),s={isNode:t,isiOS:i,isAndroid:n,isCordova:(i||n)&&"file:"===document.location.protocol,isNW:t&&function(){try{return"undefined"!==e("nw.gui")}catch(o){return!1}}()};return s.isDesktopBrowser=!s.isNode&&!s.isCordova&&!s.isNW,s});
/*bitballs@0.3.1#models/youtube*/
define("bitballs@0.3.1#models/youtube",function(e,t,n){var o,i=e("steal-platform");n.exports=function(){return o?o:o=new Promise(function(e,t){if(i.isNode)return void t({});window.onYouTubeIframeAPIReady=function(){e(YT)};var n=document.createElement("script");n.src="https://www.youtube.com/iframe_api",document.head.appendChild(n)})}});
/*bitballs@0.3.1#components/game/details/details.stache!can@2.3.23#view/stache/system*/
define("bitballs@0.3.1#components/game/details/details.stache!can@2.3.23#view/stache/system",["module","can/view/stache/stache","can/view/stache/mustache_core"],function(e,t,a){var r=t([{tokenType:"special",args:["^if gamePromise.isRejected"]},{tokenType:"chars",args:["	"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["row"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n	  	"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["col-md-8"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n			"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["youtube-container"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n				"]},{tokenType:"start",args:["div",!0]},{tokenType:"attrStart",args:["id"]},{tokenType:"attrValue",args:["youtube-player"]},{tokenType:"attrEnd",args:["id"]},{tokenType:"end",args:["div",!0]},{tokenType:"chars",args:["\n			"]},{tokenType:"close",args:["div"]},{tokenType:"chars",args:["\n		"]},{tokenType:"close",args:["div"]},{tokenType:"chars",args:["\n		"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["col-md-4"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n			"]},{tokenType:"start",args:["h3",!1]},{tokenType:"end",args:["h3",!1]},{tokenType:"chars",args:[" "]},{tokenType:"start",args:["a",!1]},{tokenType:"attrStart",args:["href"]},{tokenType:"special",args:["routeUrl tournamentId=game.tournamentId"]},{tokenType:"attrEnd",args:["href"]},{tokenType:"end",args:["a",!1]},{tokenType:"special",args:["game.tournament.year"]},{tokenType:"close",args:["a"]},{tokenType:"chars",args:[" - "]},{tokenType:"special",args:["game.round"]},{tokenType:"chars",args:[" - Court "]},{tokenType:"special",args:["game.court"]},{tokenType:"close",args:["h3"]},{tokenType:"chars",args:["\n			"]},{tokenType:"start",args:["p",!1]},{tokenType:"end",args:["p",!1]},{tokenType:"chars",args:["HOME: "]},{tokenType:"special",args:["game.homeTeam.color"]},{tokenType:"chars",args:[" - "]},{tokenType:"special",args:["game.homeTeam.name"]},{tokenType:"close",args:["p"]},{tokenType:"chars",args:["\n			"]},{tokenType:"start",args:["p",!1]},{tokenType:"end",args:["p",!1]},{tokenType:"chars",args:["AWAY: "]},{tokenType:"special",args:["game.awayTeam.color"]},{tokenType:"chars",args:[" - "]},{tokenType:"special",args:["game.awayTeam.name"]},{tokenType:"close",args:["p"]},{tokenType:"chars",args:["\n			"]},{tokenType:"start",args:["p",!1]},{tokenType:"end",args:["p",!1]},{tokenType:"chars",args:["Final Score "]},{tokenType:"special",args:["finalScore.home"]},{tokenType:"chars",args:[" - "]},{tokenType:"special",args:["finalScore.away"]},{tokenType:"close",args:["p"]},{tokenType:"chars",args:["\n			"]},{tokenType:"start",args:["p",!1]},{tokenType:"end",args:["p",!1]},{tokenType:"chars",args:["Current Score "]},{tokenType:"special",args:["currentScore.home"]},{tokenType:"chars",args:[" - "]},{tokenType:"special",args:["currentScore.away"]},{tokenType:"close",args:["p"]},{tokenType:"chars",args:["\n	        "]},{tokenType:"start",args:["p",!1]},{tokenType:"end",args:["p",!1]},{tokenType:"close",args:["p"]},{tokenType:"chars",args:["\n		"]},{tokenType:"close",args:["div"]},{tokenType:"chars",args:["\n\n	"]},{tokenType:"close",args:["div"]},{tokenType:"chars",args:["\n\n	"]},{tokenType:"start",args:["table",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["table table-condensed table-hover"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["table",!1]},{tokenType:"chars",args:["\n	"]},{tokenType:"start",args:["tbody",!1]},{tokenType:"end",args:["tbody",!1]},{tokenType:"special",args:["#eachOf game.teams"]},{tokenType:"chars",args:["\n		"]},{tokenType:"start",args:["tr",!1]},{tokenType:"end",args:["tr",!1]},{tokenType:"chars",args:["\n			"]},{tokenType:"start",args:["th",!1]},{tokenType:"attrStart",args:["colspan"]},{tokenType:"attrValue",args:["2"]},{tokenType:"attrEnd",args:["colspan"]},{tokenType:"end",args:["th",!1]},{tokenType:"special",args:["color"]},{tokenType:"chars",args:[" - "]},{tokenType:"special",args:["name"]},{tokenType:"close",args:["th"]},{tokenType:"chars",args:["\n		"]},{tokenType:"close",args:["tr"]},{tokenType:"special",args:["#eachOf players"]},{tokenType:"chars",args:["\n			"]},{tokenType:"start",args:["tr",!1]},{tokenType:"attrStart",args:["($click)"]},{tokenType:"attrValue",args:["showStatMenuFor(.,%element, %event)"]},{tokenType:"attrEnd",args:["($click)"]},{tokenType:"end",args:["tr",!1]},{tokenType:"chars",args:["\n				"]},{tokenType:"start",args:["td",!1]},{tokenType:"end",args:["td",!1]},{tokenType:"special",args:["name"]},{tokenType:"chars",args:["\n				"]},{tokenType:"close",args:["td"]},{tokenType:"start",args:["td",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["stats-container"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["td",!1]},{tokenType:"special",args:["#eachOf statsForPlayerId(id)"]},{tokenType:"chars",args:["\n						"]},{tokenType:"start",args:["span",!1]},{tokenType:"attrStart",args:["($click)"]},{tokenType:"attrValue",args:["gotoTimeMinus5(time, %event)"]},{tokenType:"attrEnd",args:["($click)"]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["stat-point stat-"]},{tokenType:"special",args:["type"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["style"]},{tokenType:"attrValue",args:["left: "]},{tokenType:"special",args:["statPercent time"]},{tokenType:"attrValue",args:["%"]},{tokenType:"attrEnd",args:["style"]},{tokenType:"end",args:["span",!1]},{tokenType:"chars",args:["							"]},{tokenType:"special",args:["type"]},{tokenType:"chars",args:["\n							"]},{tokenType:"special",args:["#if session.isAdmin"]},{tokenType:"chars",args:["\n								"]},{tokenType:"start",args:["span",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["destroy-btn glyphicon glyphicon-trash"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["($click)"]},{tokenType:"attrValue",args:["deleteStat(., %event)"]},{tokenType:"attrEnd",args:["($click)"]},{tokenType:"end",args:["span",!1]},{tokenType:"close",args:["span"]},{tokenType:"special",args:["/if"]},{tokenType:"chars",args:["\n						"]},{tokenType:"close",args:["span"]},{tokenType:"special",args:["/each"]},{tokenType:"chars",args:["\n				"]},{tokenType:"close",args:["td"]},{tokenType:"chars",args:["\n			"]},{tokenType:"close",args:["tr"]},{tokenType:"special",args:["/each"]},{tokenType:"chars",args:["\n	"]},{tokenType:"special",args:["/each"]},{tokenType:"chars",args:["\n	"]},{tokenType:"close",args:["tbody"]},{tokenType:"chars",args:["\n	"]},{tokenType:"close",args:["table"]},{tokenType:"chars",args:["\n	"]},{tokenType:"start",args:["div",!0]},{tokenType:"attrStart",args:["id"]},{tokenType:"attrValue",args:["player-pos"]},{tokenType:"attrEnd",args:["id"]},{tokenType:"end",args:["div",!0]},{tokenType:"special",args:["#if stat"]},{tokenType:"chars",args:["\n\n	"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["popover fade right in"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["role"]},{tokenType:"attrValue",args:["tooltip"]},{tokenType:"attrEnd",args:["role"]},{tokenType:"attrStart",args:["style"]},{tokenType:"attrValue",args:["display: block;"]},{tokenType:"attrEnd",args:["style"]},{tokenType:"attrStart",args:["id"]},{tokenType:"attrValue",args:["add-stat"]},{tokenType:"attrEnd",args:["id"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n		"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["arrow"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["style"]},{tokenType:"attrValue",args:["top: 50%;"]},{tokenType:"attrEnd",args:["style"]},{tokenType:"end",args:["div",!1]},{tokenType:"close",args:["div"]},{tokenType:"chars",args:["\n		"]},{tokenType:"start",args:["h3",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["popover-title"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["h3",!1]},{tokenType:"chars",args:["Add Stat for "]},{tokenType:"special",args:["stat.player.name"]},{tokenType:"close",args:["h3"]},{tokenType:"chars",args:["\n		"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["popover-content"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n			"]},{tokenType:"start",args:["form",!1]},{tokenType:"attrStart",args:["($submit)"]},{tokenType:"attrValue",args:["createStat(%event)"]},{tokenType:"attrEnd",args:["($submit)"]},{tokenType:"attrStart",args:["action"]},{tokenType:"attrEnd",args:["action"]},{tokenType:"end",args:["form",!1]},{tokenType:"chars",args:["\n				"]},{tokenType:"start",args:["label",!1]},{tokenType:"attrStart",args:["for"]},{tokenType:"attrValue",args:["stat-type"]},{tokenType:"attrEnd",args:["for"]},{tokenType:"end",args:["label",!1]},{tokenType:"chars",args:["Type"]},{tokenType:"close",args:["label"]},{tokenType:"chars",args:["\n			    "]},{tokenType:"start",args:["select",!1]},{tokenType:"attrStart",args:["{($value)}"]},{tokenType:"attrValue",args:["stat.type"]},{tokenType:"attrEnd",args:["{($value)}"]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["form-control"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["id"]},{tokenType:"attrValue",args:["stat-type"]},{tokenType:"attrEnd",args:["id"]},{tokenType:"end",args:["select",!1]},{tokenType:"chars",args:["\n			    	"]},{tokenType:"start",args:["option",!0]},{tokenType:"attrStart",args:["value"]},{tokenType:"attrEnd",args:["value"]},{tokenType:"end",args:["option",!0]},{tokenType:"special",args:["#statTypes"]},{tokenType:"chars",args:["\n			    		"]},{tokenType:"start",args:["option",!1]},{tokenType:"attrStart",args:["value"]},{tokenType:"special",args:["name"]},{tokenType:"attrEnd",args:["value"]},{tokenType:"end",args:["option",!1]},{tokenType:"special",args:["name"]},{tokenType:"close",args:["option"]},{tokenType:"special",args:["/statTypes"]},{tokenType:"chars",args:["\n			    "]},{tokenType:"close",args:["select"]},{tokenType:"chars",args:["\n\n				"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["form-group"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n				    "]},{tokenType:"start",args:["label",!1]},{tokenType:"attrStart",args:["for"]},{tokenType:"attrValue",args:["stat-time"]},{tokenType:"attrEnd",args:["for"]},{tokenType:"end",args:["label",!1]},{tokenType:"chars",args:["Time (seconds)"]},{tokenType:"close",args:["label"]},{tokenType:"chars",args:["\n				    "]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["row"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n				    	"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["col-xs-6"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n				    		"]},{tokenType:"start",args:["input",!0]},{tokenType:"attrStart",args:["type"]},{tokenType:"attrValue",args:["text"]},{tokenType:"attrEnd",args:["type"]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["form-control"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["id"]},{tokenType:"attrValue",args:["stat-time"]},{tokenType:"attrEnd",args:["id"]},{tokenType:"attrStart",args:["{($value)}"]},{tokenType:"attrValue",args:["stat.time"]},{tokenType:"attrEnd",args:["{($value)}"]},{tokenType:"end",args:["input",!0]},{tokenType:"chars",args:["\n			    		"]},{tokenType:"close",args:["div"]},{tokenType:"chars",args:["\n			    		"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["col-xs-6"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n			    		"]},{tokenType:"start",args:["a",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["btn btn-default"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["($click)"]},{tokenType:"attrValue",args:["minusTime(10)"]},{tokenType:"attrEnd",args:["($click)"]},{tokenType:"end",args:["a",!1]},{tokenType:"chars",args:["-10 s"]},{tokenType:"close",args:["a"]},{tokenType:"chars",args:["\n			    			"]},{tokenType:"start",args:["a",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["btn btn-default"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["($click)"]},{tokenType:"attrValue",args:["minusTime(2)"]},{tokenType:"attrEnd",args:["($click)"]},{tokenType:"end",args:["a",!1]},{tokenType:"chars",args:["-2 s"]},{tokenType:"close",args:["a"]},{tokenType:"chars",args:["\n			    			"]},{tokenType:"start",args:["a",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["btn btn-default"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["($click)"]},{tokenType:"attrValue",args:["addTime(2)"]},{tokenType:"attrEnd",args:["($click)"]},{tokenType:"end",args:["a",!1]},{tokenType:"chars",args:["+2 s"]},{tokenType:"close",args:["a"]},{tokenType:"chars",args:["\n			    			"]},{tokenType:"start",args:["a",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["btn btn-default"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["($click)"]},{tokenType:"attrValue",args:["addTime(10)"]},{tokenType:"attrEnd",args:["($click)"]},{tokenType:"end",args:["a",!1]},{tokenType:"chars",args:["+10 s"]},{tokenType:"close",args:["a"]},{tokenType:"chars",args:["\n			    		"]},{tokenType:"close",args:["div"]},{tokenType:"chars",args:["\n				    "]},{tokenType:"close",args:["div"]},{tokenType:"chars",args:["\n\n				"]},{tokenType:"close",args:["div"]},{tokenType:"chars",args:["\n				"]},{tokenType:"start",args:["button",!1]},{tokenType:"attrStart",args:["type"]},{tokenType:"attrValue",args:["submit"]},{tokenType:"attrEnd",args:["type"]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["btn btn-primary"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["button",!1]},{tokenType:"chars",args:["Add"]},{tokenType:"close",args:["button"]},{tokenType:"chars",args:[" "]},{tokenType:"start",args:["a",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["btn btn-default"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["($click)"]},{tokenType:"attrValue",args:["removeStat()"]},{tokenType:"attrEnd",args:["($click)"]},{tokenType:"end",args:["a",!1]},{tokenType:"chars",args:["Cancel"]},{tokenType:"close",args:["a"]},{tokenType:"chars",args:["\n			"]},{tokenType:"close",args:["form"]},{tokenType:"chars",args:["\n		"]},{tokenType:"close",args:["div"]},{tokenType:"chars",args:["\n	"]},{tokenType:"close",args:["div"]},{tokenType:"special",args:["/if"]},{tokenType:"chars",args:["\n"]},{tokenType:"special",args:["else"]},{tokenType:"chars",args:["\n	Game not found."]},{tokenType:"special",args:["/if"]},{tokenType:"done",args:[]}]);return function(t,s,n){var o={module:e};return s instanceof a.Options||(s=new a.Options(s||{})),r(t,s.add(o),n)}});
/*bitballs@0.3.1#components/game/details/details*/
define("bitballs@0.3.1#components/game/details/details",function(t,e,a){var r=t("can/component/component"),i=t("can/map/"),o=t("can/list/"),s=t("bitballs/models/game"),n=t("bitballs/models/stat"),u=t("bitballs/models/youtube"),m=t("steal-platform"),y=t("jquery");t("./details.less!"),t("bootstrap/dist/css/bootstrap.css!"),t("can/map/define/"),t("can/route/"),e.ViewModel=i.extend({define:{gamePromise:{get:function(){return s.get({id:this.attr("gameId"),withRelated:["stats","tournament","homeTeam.player1","homeTeam.player2","homeTeam.player3","homeTeam.player4","awayTeam.player1","awayTeam.player2","awayTeam.player3","awayTeam.player4"]})}},game:{get:function(t,e){this.attr("gamePromise").then(e)}},youtubePlayer:{type:"*"},statTypes:{value:n.statTypes},finalScore:{get:function(){var t=this.attr("game");if(t&&t.attr("stats")){var e=this.attr("playerIdToHomeOrAwayMap"),a={home:0,away:0};return t.attr("stats").each(function(t){"1P"===t.attr("type")&&a[e[t.attr("playerId")]]++,"2P"===t.attr("type")&&(a[e[t.attr("playerId")]]+=2)}),a}},type:"*"},currentScore:{get:function(){var t=this.attr("game");if(t&&t.attr("stats")){var e=this.attr("playerIdToHomeOrAwayMap"),a={home:0,away:0},r=this.attr("time");return t.attr("stats").each(function(t){t.attr("time")<=r&&("1P"===t.attr("type")&&a[e[t.attr("playerId")]]++,"2P"===t.attr("type")&&(a[e[t.attr("playerId")]]+=2))}),a}},type:"*"},playerIdToHomeOrAwayMap:{type:"*",get:function(){var t=this.attr("game");if(t&&t.attr("homeTeam")&&t.attr("awayTeam")){for(var e={},a=1;4>=a;a++)e[t.attr("homeTeam").attr("player"+a+"Id")]="home",e[t.attr("awayTeam").attr("player"+a+"Id")]="away";return e}}},sortedStatsByPlayerId:{type:"*",get:function(){var t=this.attr("game");return t?t.sortedStatsByPlayerId():void 0}}},showStatMenuFor:function(t,e,a){if(this.attr("session")&&this.attr("session").isAdmin()){var r=this.attr("youtubePlayer"),i=r.getCurrentTime();r.pauseVideo(),this.attr("stat",new n({time:i,playerId:t.attr("id"),gameId:this.attr("game.id"),player:t}))}},createStat:function(t){t.preventDefault();var e=this,a=this.attr("stat");a.save(function(){e.removeAttr("stat")},function(t){console.log(t),e.removeAttr("stat")})},removeStat:function(){this.removeAttr("stat")},addTime:function(t){this.attr("stat.time",this.attr("stat.time")+t)},minusTime:function(t){this.attr("stat.time",this.attr("stat.time")-t)},gotoTimeMinus5:function(t,e){var a=this.attr("youtubePlayer");a.seekTo&&a.seekTo(t-5,!0),a.playVideo&&a.playVideo(),e&&e.stopPropagation()},deleteStat:function(t,e){window.confirm("Are you sure you want to delete this stat?")&&(t.destroy(),e&&e.stopPropagation())},statPercent:function(t){var e=this.attr("duration");return e?t()/e*100:"0"},statsForPlayerId:function(t){"function"==typeof t&&(t=t());var e=this.attr("sortedStatsByPlayerId");return e?e[t]||new o:new o}}),e.Component=r.extend({tag:"game-details",template:t("./details.stache!"),viewModel:e.ViewModel,events:{inserted:function(){var t=this;u().then(function(e){t.YT=e}).then(function(){return t.scope.attr("gamePromise")}).then(function(){var e=new t.YT.Player("youtube-player",{height:"390",width:"640",videoId:t.scope.attr("game.videoUrl"),events:{onReady:t.onPlayerReady.bind(t),onStateChange:t.onPlayerStateChange.bind(t)}});t.scope.attr("youtubePlayer",e)})["catch"](function(t){m.isNode||setTimeout(function(){throw t},1)})},removed:function(){clearTimeout(this.timeUpdate)},onPlayerReady:function(){var t=this.scope.attr("youtubePlayer"),e=this,a=function(){var r=t.getDuration();r?e.scope.attr("duration",r):setTimeout(a,100)};a()},onPlayerStateChange:function(t){var e=this.viewModel,a=e.attr("youtubePlayer"),r=this,i=function(){var t=a.getCurrentTime();e.attr("stat")&&e.attr("stat").attr("time",t),r.timeUpdate=setTimeout(i,100),r.updatePosition(t)};t.data===r.YT.PlayerState.PLAYING?(this.scope.attr("playing",!0),i()):(this.scope.attr("playing",!1),clearTimeout(this.timeUpdate))},updatePosition:function(t){var e=this.scope.attr("duration");if(e){this.viewModel.attr("time",t);var a=t/e,r=this.element.find(".stats-container"),i=r.width(),o=r.first().offset(),s=r.last().offset().top-o.top+r.last().height();y("#player-pos").offset({left:o.left+a*i,top:o.top}).height(s)}},"{stat} time":function(){var t=this.scope.attr("stat.time");if("number"==typeof t&&t>=0){var e=this.scope.attr("youtubePlayer"),a=e.getCurrentTime();Math.abs(t-a)>2&&e.seekTo(t,!0)}},"{window} resize":function(){var t,e=this.viewModel.attr("youtubePlayer");e.getCurrentTime&&(t=e.getCurrentTime(),this.updatePosition(t))},"{viewModel} stat":function(t,e,a){setTimeout(function(){y("#add-stat").offset(y(".stats-container:first").offset()).show()},1)}}})});