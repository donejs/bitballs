/*bitballs@0.3.1#components/user/user.stache!can@2.3.20#view/stache/system*/
define("bitballs@0.3.1#components/user/user.stache!can@2.3.20#view/stache/system",["module","can/view/stache/stache","can/view/stache/mustache_core"],function(e,a,t){var s=a([{tokenType:"start",args:["h2",!1]},{tokenType:"end",args:["h2",!1]},{tokenType:"special",args:["#switch userStatus"]},{tokenType:"chars",args:["\n		"]},{tokenType:"special",args:['#case "new"']},{tokenType:"chars",args:["\n			Register New User"]},{tokenType:"special",args:["/case"]},{tokenType:"chars",args:["\n"]},{tokenType:"special",args:['#case "pending"']},{tokenType:"chars",args:["\n			Verify User"]},{tokenType:"special",args:["/case"]},{tokenType:"chars",args:["\n"]},{tokenType:"special",args:["#default"]},{tokenType:"chars",args:["\n			Update User"]},{tokenType:"special",args:["/default"]},{tokenType:"chars",args:["\n	"]},{tokenType:"special",args:["/switch"]},{tokenType:"chars",args:["\n"]},{tokenType:"close",args:["h2"]},{tokenType:"chars",args:["\n"]},{tokenType:"start",args:["form",!1]},{tokenType:"attrStart",args:["($submit)"]},{tokenType:"attrValue",args:["createUserHandler(%event)"]},{tokenType:"attrEnd",args:["($submit)"]},{tokenType:"attrStart",args:["action"]},{tokenType:"attrEnd",args:["action"]},{tokenType:"end",args:["form",!1]},{tokenType:"chars",args:["\n	"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["form-group"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n		"]},{tokenType:"start",args:["label",!1]},{tokenType:"attrStart",args:["for"]},{tokenType:"attrValue",args:["user-email"]},{tokenType:"attrEnd",args:["for"]},{tokenType:"end",args:["label",!1]},{tokenType:"chars",args:["\n			Email\n		"]},{tokenType:"close",args:["label"]},{tokenType:"special",args:['#is userStatus "verified"']},{tokenType:"chars",args:["\n			"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["input-group has-success has-feedback"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n				"]},{tokenType:"start",args:["span",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["input-group-addon"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["span",!1]},{tokenType:"chars",args:["verified!"]},{tokenType:"close",args:["span"]},{tokenType:"chars",args:["\n				"]},{tokenType:"start",args:["input",!0]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["form-control"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["id"]},{tokenType:"attrValue",args:["user-email"]},{tokenType:"attrEnd",args:["id"]},{tokenType:"special",args:["^if user.isNew"]},{tokenType:"attrStart",args:["disabled"]},{tokenType:"attrEnd",args:["disabled"]},{tokenType:"special",args:["/if"]},{tokenType:"attrStart",args:["{($value)}"]},{tokenType:"attrValue",args:["user.email"]},{tokenType:"attrEnd",args:["{($value)}"]},{tokenType:"end",args:["input",!0]},{tokenType:"chars",args:["\n			"]},{tokenType:"close",args:["div"]},{tokenType:"chars",args:["		"]},{tokenType:"special",args:["else"]},{tokenType:"chars",args:["\n			"]},{tokenType:"start",args:["input",!0]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["form-control"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["id"]},{tokenType:"attrValue",args:["user-email"]},{tokenType:"attrEnd",args:["id"]},{tokenType:"special",args:["^if user.isNew"]},{tokenType:"attrStart",args:["disabled"]},{tokenType:"attrEnd",args:["disabled"]},{tokenType:"special",args:["/if"]},{tokenType:"attrStart",args:["{($value)}"]},{tokenType:"attrValue",args:["user.email"]},{tokenType:"attrEnd",args:["{($value)}"]},{tokenType:"end",args:["input",!0]},{tokenType:"special",args:["/is"]},{tokenType:"chars",args:["\n	"]},{tokenType:"close",args:["div"]},{tokenType:"special",args:['#is userStatus "pending"']},{tokenType:"chars",args:["\n		"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["form-group"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n			"]},{tokenType:"start",args:["label",!1]},{tokenType:"end",args:["label",!1]},{tokenType:"chars",args:["We've sent you an email. Please verify your account by clicking on the link in the email."]},{tokenType:"close",args:["label"]},{tokenType:"chars",args:["\n		"]},{tokenType:"close",args:["div"]},{tokenType:"chars",args:["	"]},{tokenType:"special",args:["else"]},{tokenType:"chars",args:["\n		"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["form-group"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n			"]},{tokenType:"start",args:["label",!1]},{tokenType:"attrStart",args:["for"]},{tokenType:"attrValue",args:["user-password"]},{tokenType:"attrEnd",args:["for"]},{tokenType:"end",args:["label",!1]},{tokenType:"special",args:["#if user.isNew"]},{tokenType:"chars",args:["\n					Password				"]},{tokenType:"special",args:["else"]},{tokenType:"chars",args:["\n					Current Password"]},{tokenType:"special",args:["/if"]},{tokenType:"chars",args:["\n			"]},{tokenType:"close",args:["label"]},{tokenType:"chars",args:["\n			"]},{tokenType:"start",args:["input",!0]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["form-control"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["type"]},{tokenType:"attrValue",args:["password"]},{tokenType:"attrEnd",args:["type"]},{tokenType:"attrStart",args:["id"]},{tokenType:"attrValue",args:["user-password"]},{tokenType:"attrEnd",args:["id"]},{tokenType:"attrStart",args:["{($value)}"]},{tokenType:"attrValue",args:["user.password"]},{tokenType:"attrEnd",args:["{($value)}"]},{tokenType:"end",args:["input",!0]},{tokenType:"chars",args:["\n		"]},{tokenType:"close",args:["div"]},{tokenType:"special",args:["#unless user.isNew"]},{tokenType:"chars",args:["\n			"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["form-group"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n				"]},{tokenType:"start",args:["label",!1]},{tokenType:"attrStart",args:["for"]},{tokenType:"attrValue",args:["user-new-password"]},{tokenType:"attrEnd",args:["for"]},{tokenType:"end",args:["label",!1]},{tokenType:"chars",args:["\n					New Password\n				"]},{tokenType:"close",args:["label"]},{tokenType:"chars",args:["\n				"]},{tokenType:"start",args:["input",!0]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["form-control"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["type"]},{tokenType:"attrValue",args:["password"]},{tokenType:"attrEnd",args:["type"]},{tokenType:"attrStart",args:["id"]},{tokenType:"attrValue",args:["user-new-password"]},{tokenType:"attrEnd",args:["id"]},{tokenType:"attrStart",args:["{($value)}"]},{tokenType:"attrValue",args:["user.newPassword"]},{tokenType:"attrEnd",args:["{($value)}"]},{tokenType:"end",args:["input",!0]},{tokenType:"chars",args:["\n			"]},{tokenType:"close",args:["div"]},{tokenType:"special",args:["/unless"]},{tokenType:"chars",args:["\n		"]},{tokenType:"start",args:["button",!1]},{tokenType:"attrStart",args:["type"]},{tokenType:"attrValue",args:["submit"]},{tokenType:"attrEnd",args:["type"]},{tokenType:"special",args:["#if user.isSaving"]},{tokenType:"attrStart",args:["disabled"]},{tokenType:"attrEnd",args:["disabled"]},{tokenType:"special",args:["/if"]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["btn btn-default"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["button",!1]},{tokenType:"chars",args:["\n			"]},{tokenType:"special",args:["#if user.isNew"]},{tokenType:"chars",args:["Create"]},{tokenType:"special",args:["else"]},{tokenType:"chars",args:["Update"]},{tokenType:"special",args:["/if"]},{tokenType:"chars",args:["\n		"]},{tokenType:"close",args:["button"]},{tokenType:"special",args:["/is"]},{tokenType:"chars",args:["\n"]},{tokenType:"special",args:["#unless user.isNew"]},{tokenType:"chars",args:["\n		"]},{tokenType:"start",args:["br",!0]},{tokenType:"end",args:["br",!0]},{tokenType:"chars",args:["\n		"]},{tokenType:"start",args:["br",!0]},{tokenType:"end",args:["br",!0]},{tokenType:"chars",args:["\n		"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["btn btn-danger"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["($click)"]},{tokenType:"attrValue",args:["deleteUser"]},{tokenType:"attrEnd",args:["($click)"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["DELETE ACCOUNT"]},{tokenType:"close",args:["div"]},{tokenType:"special",args:["/unless"]},{tokenType:"chars",args:["\n"]},{tokenType:"special",args:["#if savePromise.isRejected"]},{tokenType:"chars",args:["\n		"]},{tokenType:"special",args:["#each savePromise.reason.responseJSON"]},{tokenType:"chars",args:["\n			"]},{tokenType:"start",args:["p",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["text-danger"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["p",!1]},{tokenType:"special",args:["."]},{tokenType:"close",args:["p"]},{tokenType:"special",args:["/each"]},{tokenType:"chars",args:["\n	"]},{tokenType:"special",args:["/if"]},{tokenType:"chars",args:["\n"]},{tokenType:"close",args:["form"]},{tokenType:"done",args:[]}]);return function(a,r,n){var o={module:e};return r instanceof t.Options||(r=new t.Options(r||{})),s(a,r.add(o),n)}});
/*bitballs@0.3.1#components/user/user*/
define("bitballs@0.3.1#components/user/user",function(e,t,s){var r=e("can/component/component"),n=e("bitballs/models/user"),a=e("bitballs/models/session");e("bootstrap/dist/css/bootstrap.css!"),e("can/map/define/"),e("can/route/"),e("can/view/href/"),t.ViewModel=can.Map.extend({define:{user:{Value:n,get:function(e){return this.attr("session.user")?this.attr("session.user"):e}},session:{value:null},userStatus:{get:function(){return this.attr("user").isNew()?"new":this.attr("user.verified")?"verified":"pending"}}},createUserHandler:function(e){e.preventDefault(),this.saveUser()},saveUser:function(){var e=this,t=this.attr("user").isNew(),s=this.attr("user").save().then(function(s){s.attr({password:"",verificationHash:""}),s.removeAttr("newPassword"),e.attr("session")?e.attr("session").attr({user:s}):e.attr("session",new a({user:s})),t&&can.route.attr("page","account")});return this.attr("savePromise",s),s},deleteUser:function(){var e=this;confirm("Are you sure you want to delete your account?")&&this.attr("user").destroy(function(){e.attr("session").destroy(),e.attr("session",null),can.route.attr("page","register")})}}),t.Component=r.extend({tag:"bitballs-user",template:e("./user.stache!"),viewModel:t.ViewModel})});