define("bitballs@0.4.0#components/user/details/details.stache!steal-stache@3.0.7#steal-stache",["module","can-stache","can-stache/src/mustache_core","can-view-import@3.0.7#can-view-import","can-stache-bindings@3.1.6#can-stache-bindings"],function(e,t,a){var s=t([{tokenType:"start",args:["h2",!1]},{tokenType:"end",args:["h2",!1]},{tokenType:"special",args:["#switch userStatus"]},{tokenType:"chars",args:["\n\t\t"]},{tokenType:"special",args:['#case "new"']},{tokenType:"chars",args:["\n\t\t\tRegister New User"]},{tokenType:"special",args:["/case"]},{tokenType:"chars",args:["\n"]},{tokenType:"special",args:['#case "pending"']},{tokenType:"chars",args:["\n\t\t\tVerify User"]},{tokenType:"special",args:["/case"]},{tokenType:"chars",args:["\n"]},{tokenType:"special",args:["#default"]},{tokenType:"chars",args:["\n\t\t\tUpdate User"]},{tokenType:"special",args:["/default"]},{tokenType:"chars",args:["\n\t"]},{tokenType:"special",args:["/switch"]},{tokenType:"chars",args:["\n"]},{tokenType:"close",args:["h2"]},{tokenType:"chars",args:["\n"]},{tokenType:"start",args:["form",!1]},{tokenType:"attrStart",args:["($submit)"]},{tokenType:"attrValue",args:["saveUser(%event)"]},{tokenType:"attrEnd",args:["($submit)"]},{tokenType:"attrStart",args:["action"]},{tokenType:"attrEnd",args:["action"]},{tokenType:"end",args:["form",!1]},{tokenType:"chars",args:["\n\t"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["form-group"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n\t\t"]},{tokenType:"start",args:["label",!1]},{tokenType:"attrStart",args:["for"]},{tokenType:"attrValue",args:["user-email"]},{tokenType:"attrEnd",args:["for"]},{tokenType:"end",args:["label",!1]},{tokenType:"chars",args:["\n\t\t\tEmail\n\t\t"]},{tokenType:"close",args:["label"]},{tokenType:"special",args:['#is userStatus "verified"']},{tokenType:"chars",args:["\n\t\t\t"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["input-group has-success has-feedback"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n\t\t\t\t"]},{tokenType:"start",args:["span",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["input-group-addon"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["span",!1]},{tokenType:"chars",args:["verified!"]},{tokenType:"close",args:["span"]},{tokenType:"chars",args:["\n\t\t\t\t"]},{tokenType:"start",args:["input",!0]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["form-control"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["id"]},{tokenType:"attrValue",args:["user-email"]},{tokenType:"attrEnd",args:["id"]},{tokenType:"special",args:["^if user.isNew"]},{tokenType:"attrStart",args:["disabled"]},{tokenType:"attrEnd",args:["disabled"]},{tokenType:"special",args:["/if"]},{tokenType:"attrStart",args:["{($value)}"]},{tokenType:"attrValue",args:["user.email"]},{tokenType:"attrEnd",args:["{($value)}"]},{tokenType:"end",args:["input",!0]},{tokenType:"chars",args:["\n\t\t\t"]},{tokenType:"close",args:["div"]},{tokenType:"chars",args:["\t\t"]},{tokenType:"special",args:["else"]},{tokenType:"chars",args:["\n\t\t\t"]},{tokenType:"start",args:["input",!0]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["form-control"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["id"]},{tokenType:"attrValue",args:["user-email"]},{tokenType:"attrEnd",args:["id"]},{tokenType:"special",args:["^if user.isNew"]},{tokenType:"attrStart",args:["disabled"]},{tokenType:"attrEnd",args:["disabled"]},{tokenType:"special",args:["/if"]},{tokenType:"attrStart",args:["{($value)}"]},{tokenType:"attrValue",args:["user.email"]},{tokenType:"attrEnd",args:["{($value)}"]},{tokenType:"end",args:["input",!0]},{tokenType:"special",args:["/is"]},{tokenType:"chars",args:["\n\t"]},{tokenType:"close",args:["div"]},{tokenType:"special",args:['#is userStatus "pending"']},{tokenType:"chars",args:["\n\t\t"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["form-group"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n\t\t\t"]},{tokenType:"start",args:["label",!1]},{tokenType:"end",args:["label",!1]},{tokenType:"chars",args:["We've sent you an email. Please verify your account by clicking on the link in the email."]},{tokenType:"close",args:["label"]},{tokenType:"chars",args:["\n\t\t"]},{tokenType:"close",args:["div"]},{tokenType:"chars",args:["\t"]},{tokenType:"special",args:["else"]},{tokenType:"chars",args:["\n\t\t"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["form-group"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n\t\t\t"]},{tokenType:"start",args:["label",!1]},{tokenType:"attrStart",args:["for"]},{tokenType:"attrValue",args:["user-password"]},{tokenType:"attrEnd",args:["for"]},{tokenType:"end",args:["label",!1]},{tokenType:"special",args:["#if user.isNew"]},{tokenType:"chars",args:["\n\t\t\t\t\tPassword\t\t\t\t"]},{tokenType:"special",args:["else"]},{tokenType:"chars",args:["\n\t\t\t\t\tCurrent Password"]},{tokenType:"special",args:["/if"]},{tokenType:"chars",args:["\n\t\t\t"]},{tokenType:"close",args:["label"]},{tokenType:"chars",args:["\n\t\t\t"]},{tokenType:"start",args:["input",!0]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["form-control"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["type"]},{tokenType:"attrValue",args:["password"]},{tokenType:"attrEnd",args:["type"]},{tokenType:"attrStart",args:["id"]},{tokenType:"attrValue",args:["user-password"]},{tokenType:"attrEnd",args:["id"]},{tokenType:"attrStart",args:["{($value)}"]},{tokenType:"attrValue",args:["user.password"]},{tokenType:"attrEnd",args:["{($value)}"]},{tokenType:"end",args:["input",!0]},{tokenType:"chars",args:["\n\t\t"]},{tokenType:"close",args:["div"]},{tokenType:"special",args:["#unless user.isNew"]},{tokenType:"chars",args:["\n\t\t\t"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["form-group"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["\n\t\t\t\t"]},{tokenType:"start",args:["label",!1]},{tokenType:"attrStart",args:["for"]},{tokenType:"attrValue",args:["user-new-password"]},{tokenType:"attrEnd",args:["for"]},{tokenType:"end",args:["label",!1]},{tokenType:"chars",args:["\n\t\t\t\t\tNew Password\n\t\t\t\t"]},{tokenType:"close",args:["label"]},{tokenType:"chars",args:["\n\t\t\t\t"]},{tokenType:"start",args:["input",!0]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["form-control"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["type"]},{tokenType:"attrValue",args:["password"]},{tokenType:"attrEnd",args:["type"]},{tokenType:"attrStart",args:["id"]},{tokenType:"attrValue",args:["user-new-password"]},{tokenType:"attrEnd",args:["id"]},{tokenType:"attrStart",args:["{($value)}"]},{tokenType:"attrValue",args:["user.newPassword"]},{tokenType:"attrEnd",args:["{($value)}"]},{tokenType:"end",args:["input",!0]},{tokenType:"chars",args:["\n\t\t\t"]},{tokenType:"close",args:["div"]},{tokenType:"special",args:["/unless"]},{tokenType:"chars",args:["\n\t\t"]},{tokenType:"start",args:["button",!1]},{tokenType:"attrStart",args:["type"]},{tokenType:"attrValue",args:["submit"]},{tokenType:"attrEnd",args:["type"]},{tokenType:"special",args:["#if user.isSaving"]},{tokenType:"attrStart",args:["disabled"]},{tokenType:"attrEnd",args:["disabled"]},{tokenType:"special",args:["/if"]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["btn btn-default"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["button",!1]},{tokenType:"chars",args:["\n\t\t\t"]},{tokenType:"special",args:["#if user.isNew"]},{tokenType:"chars",args:["Create"]},{tokenType:"special",args:["else"]},{tokenType:"chars",args:["Update"]},{tokenType:"special",args:["/if"]},{tokenType:"chars",args:["\n\t\t"]},{tokenType:"close",args:["button"]},{tokenType:"special",args:["/is"]},{tokenType:"chars",args:["\n"]},{tokenType:"special",args:["#unless user.isNew"]},{tokenType:"chars",args:["\n\t\t"]},{tokenType:"start",args:["br",!0]},{tokenType:"end",args:["br",!0]},{tokenType:"chars",args:["\n\t\t"]},{tokenType:"start",args:["br",!0]},{tokenType:"end",args:["br",!0]},{tokenType:"chars",args:["\n\t\t"]},{tokenType:"start",args:["div",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["btn btn-danger"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"attrStart",args:["($click)"]},{tokenType:"attrValue",args:["deleteUser()"]},{tokenType:"attrEnd",args:["($click)"]},{tokenType:"end",args:["div",!1]},{tokenType:"chars",args:["DELETE ACCOUNT"]},{tokenType:"close",args:["div"]},{tokenType:"special",args:["/unless"]},{tokenType:"chars",args:["\n"]},{tokenType:"special",args:["#if savePromise.isRejected"]},{tokenType:"chars",args:["\n\t\t"]},{tokenType:"special",args:["#each savePromise.reason.responseJSON"]},{tokenType:"chars",args:["\n\t\t\t"]},{tokenType:"start",args:["p",!1]},{tokenType:"attrStart",args:["class"]},{tokenType:"attrValue",args:["text-danger"]},{tokenType:"attrEnd",args:["class"]},{tokenType:"end",args:["p",!1]},{tokenType:"special",args:["."]},{tokenType:"close",args:["p"]},{tokenType:"special",args:["/each"]},{tokenType:"chars",args:["\n\t"]},{tokenType:"special",args:["/if"]},{tokenType:"chars",args:["\n"]},{tokenType:"close",args:["form"]},{tokenType:"chars",args:["\n"]},{tokenType:"done",args:[]}]);return function(t,r,n){var o={module:e};return r instanceof a.Options||(r=new a.Options(r||{})),s(t,r.add(o),n)}}),define("bitballs@0.4.0#components/user/details/details",function(e,t,a){var s=e("can-component"),r=e("bitballs/models/user"),n=e("bitballs/models/session"),o=e("can-route"),p=e("can-define/map/map");e("bootstrap/dist/css/bootstrap.css!"),e("can-route"),t.ViewModel=p.extend({session:{value:null},savePromise:"any",user:{Value:r,get:function(e){return this.session?this.session.user:e}},saveUser:function(e){e&&e.preventDefault();var t=this,a=this.user.isNew(),s=this.user.save().then(function(e){e.password="",e.verificationHash="",e.newPassword=null,t.session?t.session.user=e:t.session=new n({user:e}),a&&(o.page="account")});return this.savePromise=s,s},get userStatus(){return this.user.isNew()?"new":this.user.verified?"verified":"pending"},deleteUser:function(){var e=this;confirm("Are you sure you want to delete your account?")&&this.user.destroy(function(){e.session.destroy(),e.session=null,o.page="register"})}}),t.Component=s.extend({tag:"user-details",view:e("./details.stache!"),ViewModel:t.ViewModel})});