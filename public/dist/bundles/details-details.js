/*bitballs@0.3.1#models/team*/
define("bitballs@0.3.1#models/team",function(e,r,a){var n=e("can-connect/can/super-map/"),t=e("can-connect/can/tag/"),l=e("can-set"),i=e("./player"),c=e("can-define/map/map"),o=e("can-define/list/list"),s=c.extend("Team",{colors:["Black","White","Red","Green","Blue","Yellow","Brown","Gray","Orange","Purple"]},{id:"number",tournamentId:"number",player1:i,player2:i,player3:i,player4:i,name:"string",color:"string",player1Id:"number",player2Id:"number",player3Id:"number",player4Id:"number",get players(){var e=[],r=this;return["player1","player2","player3","player4"].map(function(a){r[a]&&e.push(r[a])}),new i.List(e)}});s.List=o.extend("TeamsList",{"#":s,get idMap(){var e={};return this.each(function(r){e[r.id]=r}),e},removeById:function(e){for(var r=0;r<this.length;)this[r].id===e?this.splice(r,1):r++},getById:function(e){return this.idMap[e]}}),s.algebra=new l.Algebra(new l.Translate("where","where"),l.comparators.sort("sortBy"));var p=n({Map:s,List:s.List,url:{resource:"/services/teams",contentType:"application/x-www-form-urlencoded"},name:"team",algebra:s.algebra});t("team-model",p),a.exports=s});
/*bitballs@0.3.1#models/stat*/
define("bitballs@0.3.1#models/stat",function(e,a,t){var n=e("can-connect/can/super-map/"),s=e("can-connect/can/tag/"),r=e("can-set"),i=e("can-define/map/map"),c=e("can-define/list/list"),m=e("bitballs/models/player");e("can-define-backup");var o=i.extend("Stat",{statTypes:[{name:"1P"},{name:"1PA"},{name:"2P"},{name:"2PA"},{name:"ORB"},{name:"DRB"},{name:"Ast"},{name:"Stl"},{name:"Blk"},{name:"To"}]},{id:"number",player:{Type:m,serialize:!1},playerId:"number",gameId:"number",type:"any",time:{set:function(e){return Math.round(e)}}});o.List=c.extend("StatsList",{"#":o}),o.algebra=new r.Algebra(new r.Translate("where","where"),r.comparators.sort("sortBy")),o.connection=n({idProp:"id",Map:o,List:o.List,url:{getData:"/services/stats",createData:"/services/stats",destroyData:"/services/stats/{id}",contentType:"application/x-www-form-urlencoded"},name:"stat",algebra:o.algebra}),s("stat-model",o.connection),t.exports=o});
/*can-util@3.2.2#js/omit/omit*/
define("can-util@3.2.2#js/omit/omit",function(n,i,t){t.exports=function(n,i){var t={};for(var o in n)i.indexOf(o)<0&&(t[o]=n[o]);return t}});
/*can-util@3.2.2#dom/dom*/
define("can-util@3.2.2#dom/dom",function(t,a,e){!function(a){e.exports={ajax:t("./ajax/ajax"),attr:t("./attr/attr"),childNodes:t("./child-nodes/child-nodes"),className:t("./class-name/class-name"),contains:t("./contains/contains"),data:t("./data/data"),dispatch:t("./dispatch/dispatch"),document:t("./document/document"),events:t("./events/events"),frag:t("./frag/frag"),fragment:t("./fragment/fragment"),isOfGlobalDocument:t("./is-of-global-document/is-of-global-document"),matches:t("./matches/matches"),mutate:t("./mutate/mutate"),mutationObserver:t("./mutation-observer/mutation-observer")}}(function(){return this}())});
/*can-util@3.2.2#js/cid/cid*/
define("can-util@3.2.2#js/cid/cid",function(c,i,n){n.exports=c("can-cid")});
/*can-util@3.2.2#js/is-string/is-string*/
define("can-util@3.2.2#js/is-string/is-string",function(n,i,t){t.exports=function(n){return"string"==typeof n}});
/*can-util@3.2.2#js/types/types*/
define("can-util@3.2.2#js/types/types",function(e,t,n){n.exports=e("can-types")});
/*can-util@3.2.2#js/js*/
define("can-util@3.2.2#js/js",function(i,s,e){!function(s){e.exports={assign:i("./assign/assign"),cid:i("./cid/cid"),deepAssign:i("./deep-assign/deep-assign"),dev:i("./dev/dev"),diff:i("./diff/diff"),each:i("./each/each"),global:i("./global/global"),"import":i("./import/import"),isArray:i("./is-array/is-array"),isArrayLike:i("./is-array-like/is-array-like"),isBrowserWindow:i("./is-browser-window/is-browser-window"),isEmptyObject:i("./is-empty-object/is-empty-object"),isFunction:i("./is-function/is-function"),isNode:i("./is-node/is-node"),isPlainObject:i("./is-plain-object/is-plain-object"),isPromise:i("./is-promise/is-promise"),isString:i("./is-string/is-string"),isWebWorker:i("./is-web-worker/is-web-worker"),joinURIs:i("./join-uris/join-uris"),last:i("./last/last"),makeArray:i("./make-array/make-array"),omit:i("./omit/omit"),setImmediate:i("./set-immediate/set-immediate"),string:i("./string/string"),types:i("./types/types")}}(function(){return this}())});
/*can-util@3.2.2#can-util*/
define("can-util@3.2.2#can-util",function(s,e,i){var n=s("./js/deep-assign/deep-assign"),a=s("./js/omit/omit"),t=s("can-namespace");i.exports=n(t,s("./dom/dom"),a(s("./js/js"),["cid","types"]))});
/*bitballs@0.3.1#models/game*/
define("bitballs@0.3.1#models/game",function(t,e,n){var r=t("can-connect/can/super-map/"),a=t("can-set"),o=t("can-connect/can/tag/"),u=t("bitballs/models/team"),s=t("bitballs/models/player"),i=t("bitballs/models/stat"),c=t("./tournament"),m=t("can-define/map/map"),d=t("can-define/list/list"),l=t("can-util"),h=m.extend("Game",{courtNames:["1","2","3","4"],roundNames:["Round 1","Round 2","Round 3","Round 4","Round 5","Elimination","Quarter Finals","Semi Finals","Championship"]},{id:"number",tournamentId:"number",tournament:c,homeTeamId:"number",awayTeamId:"number",homeTeam:u,awayTeam:u,round:"string",court:"string",get teams(){var t=[],e=this.homeTeam,n=this.awayTeam;return e&&t.push(e),n&&t.push(n),new u.List(t)},get players(){var t=[];return this.teams.forEach(function(e){[].push.apply(t,l.makeArray(e.players))}),new s.List(t)},stats:{Type:i.List,set:function(t){return t.__listSet={where:{gameId:this.id}},t}},videoUrl:{set:function(t){var e=/^.*(?:youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#\&\?]*).*/,n=t&&t.match(e),r=n&&n.length>1&&n[1]||t;return r}},statsForPlayerId:function(t){return this.stats.filter(function(e){return e.playerId===t})},sortedStatsByPlayerId:function(){if(this.stats){var t={};return this.stats.forEach(function(e){var n=e.playerId,r=t[n];r||(r=new d,r.comparator="time",t[n]=r),r.push(e)}),t}}});h.List=d.extend("GamesList",{"#":h,get gamesGroupedByRound(){var t={};return this.forEach(function(e){var n=e.round,r=e.court;t[n]=t[n]||{_count:0},t[n][r]=e,t[n]._count++}),t},getGameCountForRound:function(t){var e=this.gamesGroupedByRound,n=e[t];return n?n._count:0},getAvailableRounds:function(){return h.roundNames.filter(function(t){return this.getGameCountForRound(t)<h.courtNames.length},this)},getRoundsWithGames:function(){var t=h.roundNames.filter(function(t){return this.getGameCountForRound(t)>0},this);return t},getAvailableCourts:function(t){return h.courtNames.filter(function(e){return!this.getGameForRoundAndCourt(t,e)},this)},getGameForRoundAndCourt:function(t,e){var n=this.gamesGroupedByRound,r=n[t];return r&&r[e]}}),h.algebra=new a.Algebra(new a.Translate("where","where"),a.comparators.sort("sortBy")),h.connection=r({Map:h,List:h.List,url:{resource:"/services/games",contentType:"application/x-www-form-urlencoded"},name:"game",algebra:h.algebra}),o("game-model",h.connection),n.exports=h});